/**
* setup file run server nodejs
*/

//Define Dependences
const http = require('http');

const app = require('../index');
const config = require('../src/configs/configs');
const chatSocket = require('../src/controllers/chat_back.controller.js')
//Define Port
const port = config.PORT;
app.set('port', port);

//create a server 
const server = http.createServer(app)
const io = require('socket.io')(server);
/* io.on('connection', client => {
  console.log(`A user is connected with id = [${client.id}]`)
  client.on('event', data => { console.log('Event running!') });
  client.on('disconnect', () => { console.log('Client disconnected!') });
}); */

io.on('connection', chatSocket.chat);

//listen a port
server.listen(port, () => {
    console.log(`Api server running on localhost:${port}`)
});